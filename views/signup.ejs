<%- include('header.ejs') %>
<main class="mw">
  <h2>THE BLOG</h2>
  <h3>SIGNUP</h3>

  <form action="/signup" method="post" class="writeCon">
    <label for="userid">ID</label>
    <input type="text" id="userid" name="userid" placeholder="ID" />

    <label for="pw">PassWord</label>
    <input type="password" id="pw" name="pw" placeholder="PassWord" />
    <label for="pw">PassWord Confirm</label>
    <input type="password" id="pw2" name="pw2" placeholder="PassWordConfirm" />

    <label for="username">NickName</label>
    <input type="text" id="username" name="username" placeholder="Nickname" />

    <button class="signupBtn">SIGNUP</button>
  </form>
  <p class="alertModal">info msg</p>
  <p><a href="/login">login</a></p>
</main>
<script>
  const signupBtn = document.querySelector(".signupBtn");
  const alertModal = document.querySelector(".alertModal");

  signupBtn.addEventListener("click", (e) => {
    e.preventDefault();
    const userid = document.querySelector("#userid");
    const username = document.querySelector("#username");
    const pw = document.querySelector("#pw");
    const pw2 = document.querySelector("#pw2");

    if (userid.value.trim() === "") {
      alertModal.innerHTML = `아이디를 입력해주세요`;
      userid.focus();
      return;
    }

    //아이디는 영문으로만 작성, 정규식 표현법 활용
    if (!/^[a-zA-Z]+$/.test(userid.value.trim())) {
      alertModal.innerHTML = `아이디는 영문으로만 작성해주세요`;
      userid.focus();
      return;
    }

    //패스워드 입력값 확인, 대소문자,숫자,특문 포함 8자리 이상
    // const passwordRegex =
    //   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{8,}$/;

    // if (!passwordRegex.test(pw.value)) {
    //   alertModal.innerHTML = `대소문자,숫자,특문 포함 8자리 이상이어야 합니다`;
    //   pw.focus();
    //   return;
    // }
    if (pw.value.trim() === "") {
      alertModal.innerHTML = `패스워드 확인란에 입력해주세요`;
      pw.focus();
      return;
    }

    if (pw.value.trim() !== pw2.value.trim()) {
      alertModal.innerHTML = `비번이 같지 않습니다`;
      pw2.focus();
      return;
    }

    if (username.value.trim() == "") {
      alertModal.innerHTML = `닉네임을 입력해주세요`;
      username.focus();
      return;
    }

    e.target.closest("form").submit();
  });
</script>
<%- include('footer.ejs') %>
